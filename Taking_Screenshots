import pyautogui
import os
import time
from IPython.display import display, Image

# Create "Screenshots" directory if it doesn't exist
screenshots_directory = "Screenshots"
if not os.path.exists(screenshots_directory):
    os.makedirs(screenshots_directory)

# Read values from the "Config.txt" file
ConfigFile = open("Config.txt", "r")
Config = ConfigFile.readlines()
ConfigFile.close()

i = 1
while True:
    screenshot_path = os.path.join("Screenshots", f"Screenshot_{i:03d}.png")
    pyautogui.screenshot().save(screenshot_path)
    display(Image(filename=screenshot_path))  # Display the captured screenshot
    print(f"Captured Screenshot {i}: {screenshot_path}")
    i += 1
time.sleep(intervals)

# Check if screenshots should be deleted
if delete_screenshots:
    screenshots_directory = "Screenshots"

    try:
        # Delete all files in the "Screenshots" directory
        for file in os.listdir(screenshots_directory):
            file_path = os.path.join(screenshots_directory, file)

            # Skip files/directories starting with "."
            if not file.startswith("."):
                os.remove(file_path)
    except Exception as e:
        print(f"Error deleting screenshots: {e}")
        
